var _ssa=_ssa||{};(function(window,document){var _empty="-",_tag="|",_no_data_tag="",_splited="*:*",expires_ms_2years=2*365*24*60*60*1000,expires_ms_24hours=24*60*60*1000,expires_ms_30mins=30*60*1000;var _crossDayFlag=0,_pvFlag=0,_inTime=_no_data_tag;var visitorId=_no_data_tag,sessionId=_no_data_tag,newVisitorFlg=0;var ua=navigator.userAgent,pf=navigator.platform,p="push",m="match",i="indexOf",npo="unknow but like Phone",npa="unknow but like Tablet",n="unknown",r;_ssa.pvSend=!_ssa.pvSend?false:_ssa.pvSend;_ssa.domain="";_ssa.versionId=1;_ssa.max_length=300;_ssa.cookie_domain="";_ssa.cookie_path="/";_ssa.hotClickObj={count:0,pointSet:""};var Set=function(){this.isNullAdded=false;var map={};this.contains=function(key){if(key===null){return this.isNullAdded}else{if(key===undefined){return false}else{return map[key]?true:false}}};this.add=function(val){if(val===null){this.isNullAdded=true}else{if(val!==undefined){map[val]=true}}return this};this.addAll=function(val){if(val!==null&&val!==undefined&&val instanceof Array){for(var idx=0;idx<val.length;idx++){this.add(val[idx])}}return this};this.remove=function(val){if(val===null){this.isNullAdded=false}else{if(val!==undefined){delete map[val]}}return this};this.removeAll=function(val){if(val!==null&&val!==undefined&&val instanceof Array){for(var idx=0;idx<val.length;idx++){this.remove(val[idx])}}return this};this.clear=function(){this.isNullAdded=false;map={};return this};this.size=function(){return this.list().length};this.isEmpty=function(){return this.list().length>0?false:true};this.list=function(){var arr=[];if(this.isNullAdded){arr.push(null)}for(o in map){if(map.hasOwnProperty(o)){arr.push(o)}}return arr}};var HashMap=function(){var size=0;var entry=new Object();this.getThis=function(){return entry};this.put=function(key,value){if(!this.containsKey(key)){size++}entry[key]=value};this.get=function(key){if(this.containsKey(key)){return entry[key]}else{return null}};this.remove=function(key){if(delete entry[key]){size--}};this.containsKey=function(key){return(key in entry)};this.containsValue=function(value){for(var prop in entry){if(entry[prop]==value){return true}}return false};this.values=function(){var values=new Array(size);for(var prop in entry){values.push(entry[prop])}return values};this.keys=function(){var keys=new Array(size);for(var prop in entry){keys.push(prop)}return keys};this.size=function(){return size}};var Config={websiteId:"4a800e24-7b53-40a4-8113-cbc9a1305f4b",versionId:"1.0",domain:"suning.com",cookieDomain:"",cookiePath:"/",maxLength:"300",ssaBaseUrl:"http://ssad.suning.com",apiName:"ssa.gif",searchers:[".google.com",".baidu.com",".soso.com",".bing.com",".yahoo.com",".sogou.com",".360.cn",".so.com",".youdao.com",".haosou.com"],searchKeyWords:["wd","q","w","query","p","word"],sourceMediumArr:["direct","referral","organic"],ssa1_visitorCookieId:"_snma",ssa1_visitorCookieKeys:["constant","visitorid","firstViewTime","lastViewTime","thisViewTime","totalPvs","totalVisits"],cookieVisitorId:"__ssav",cookieSessionId:"__ssas",cookieSourceId:"__ssar",cookieVisitorKeys:["visitorId","firstViewTime","lastViewTime","thisViewTime","totalPvs","totalVisits","vType"],cookieSessionKeys:["sessionId","inTime","outTime","views"],cookieSourceKeys:["source","medium","content","campaign","theme"],cookieFromUrl:"__ssaf",init:function(){var _domain="",_dom=document.domain,_dn=this.domain;if("www."==_dom.substring(0,4)){_dom=_dom.substring(4,_dom.length)}if(""==this.domain){_domain=_dom}else{_dn="www."==_dn.substring(0,4)?_dn.substring(3,_dn.length):_dn;_dom=_dn.substring(0,1)=="."?"."+_dom:_dom;var l1=_dn.length;var l2=_dom.length;if(l2-l1>=0){if(_dom.indexOf(_dn)==l2-l1){_domain=_dn}}}this.cookieDomain=_domain.toLowerCase();if(this.cookieDomain.indexOf(".")!=0){this.cookieDomain="."+this.cookieDomain}var _path="",_ccPath=this.cookiePath,_lcPath=document.location.pathname;if(_ccPath==""||_ccPath=="/"){_path=_ccPath}else{if(_ccPath.indexOf("/")==0){var _lastIndex=_ccPath.lastIndexOf("/");if(_lastIndex!=_ccPath.length-1){_ccPath+="/"}if(_lcPath.indexOf(_ccPath)==0){_path=_ccPath}}}this.cookiePath=_path}};var FieldConfig={dataType:{all:0,access:1,event:2,search:3,register:4,hotclick:5,cookie_mapping:6,product:7,storage:8,exposure:9,shopping_cart:10,order:11,pay:12,custom:13},collectFlg:{access:1,event:1,search:1,register:1,hotclick:1,cookie_mapping:0,product:0,storage:1,exposure:1,shopping_cart:0,order:1,pay:0,custom:0},commonData:{all:{con:{state:1,encode:1},sid:{state:1,encode:0},sr:{state:1,encode:0},curl:{state:1,encode:1},vt:{state:1,encode:0},pid:{state:1,encode:0},furl:{state:1,encode:1},ct:{state:1,encode:0},th:{state:1,encode:1},i:{state:1,encode:0},v:{state:1,encode:0},t:{state:1,encode:0},md:{state:1,encode:0},ac:{state:1,encode:1},st:{state:1,encode:0},vid:{state:1,encode:0}},access:{con:{state:1,encode:1},flash:{state:1,encode:0},col:{state:1,encode:0},curl:{state:1,encode:1},vt:{state:1,encode:0},furl:{state:1,encode:1},th:{state:1,encode:1},md:{state:1,encode:0},st:{state:1,encode:0},vid:{state:1,encode:0},os:{state:1,encode:1},sid:{state:1,encode:0},sr:{state:1,encode:0},pid:{state:1,encode:0},se:{state:1,encode:0},ct:{state:1,encode:0},i:{state:1,encode:0},ip:{state:1,encode:0},v:{state:1,encode:0},pf:{state:1,encode:1},t:{state:1,encode:0},ptitle:{state:1,encode:1},sec:{state:1,encode:0},ck:{state:1,encode:0},ac:{state:1,encode:1},ua:{state:1,encode:1},java:{state:1,encode:0},ter:{state:1,encode:1}},event:{con:{state:1,encode:1},sid:{state:1,encode:0},text:{state:1,encode:1},sr:{state:1,encode:0},curl:{state:1,encode:1},vt:{state:1,encode:0},pid:{state:1,encode:0},env:{state:1,encode:0},furl:{state:1,encode:1},ct:{state:1,encode:0},th:{state:1,encode:1},i:{state:1,encode:0},v:{state:1,encode:0},title:{state:1,encode:1},t:{state:1,encode:0},md:{state:1,encode:0},tname:{state:1,encode:0},ac:{state:1,encode:1},tid:{state:1,encode:0},st:{state:1,encode:0},vid:{state:1,encode:0}},search:{con:{state:1,encode:1},sid:{state:1,encode:0},sct:{state:1,encode:0},sr:{state:1,encode:0},curl:{state:1,encode:1},vt:{state:1,encode:0},pid:{state:1,encode:0},furl:{state:1,encode:1},ct:{state:1,encode:0},swd:{state:1,encode:0},th:{state:1,encode:1},i:{state:1,encode:0},v:{state:1,encode:0},t:{state:1,encode:0},md:{state:1,encode:0},ac:{state:1,encode:1},st:{state:1,encode:0},vid:{state:1,encode:0}},register:{con:{state:1,encode:1},sid:{state:1,encode:0},sr:{state:1,encode:0},curl:{state:1,encode:1},vt:{state:1,encode:0},pid:{state:1,encode:0},furl:{state:1,encode:1},ct:{state:1,encode:0},th:{state:1,encode:1},i:{state:1,encode:0},v:{state:1,encode:0},t:{state:1,encode:0},md:{state:1,encode:0},ac:{state:1,encode:1},st:{state:1,encode:0},vid:{state:1,encode:0}},hotclick:{con:{state:1,encode:1},sid:{state:1,encode:0},col:{state:1,encode:0},sr:{state:1,encode:0},curl:{state:1,encode:1},vt:{state:1,encode:0},pid:{state:1,encode:0},se:{state:1,encode:0},furl:{state:1,encode:1},ct:{state:1,encode:0},xy:{state:1,encode:0},th:{state:1,encode:1},i:{state:1,encode:0},v:{state:1,encode:0},t:{state:1,encode:0},md:{state:1,encode:0},ac:{state:1,encode:1},ua:{state:1,encode:0},st:{state:1,encode:0},vid:{state:1,encode:0}},cookie_mapping:null,product:null,storage:{con:{state:1,encode:1},sid:{state:1,encode:0},sr:{state:1,encode:0},curl:{state:1,encode:1},vt:{state:1,encode:0},pid:{state:1,encode:0},furl:{state:1,encode:1},ct:{state:1,encode:0},city:{state:1,encode:1},th:{state:1,encode:1},i:{state:1,encode:0},v:{state:1,encode:0},t:{state:1,encode:0},md:{state:1,encode:0},pc:{state:1,encode:0},ac:{state:1,encode:1},st:{state:1,encode:0},vid:{state:1,encode:0},ps:{state:1,encode:0}},exposure:{con:{state:1,encode:1},sid:{state:1,encode:0},sr:{state:1,encode:0},curl:{state:1,encode:1},vt:{state:1,encode:0},pid:{state:1,encode:0},furl:{state:1,encode:1},ct:{state:1,encode:0},th:{state:1,encode:1},i:{state:1,encode:0},exp:{state:1,encode:1},v:{state:1,encode:0},t:{state:1,encode:0},md:{state:1,encode:0},ac:{state:1,encode:1},st:{state:1,encode:0},vid:{state:1,encode:0}},shopping_cart:null,order:{con:{state:1,encode:1},sid:{state:1,encode:0},ost:{state:1,encode:0},sr:{state:1,encode:0},curl:{state:1,encode:1},vt:{state:1,encode:0},oin:{state:1,encode:1},pid:{state:1,encode:0},furl:{state:1,encode:1},ct:{state:1,encode:0},th:{state:1,encode:1},i:{state:1,encode:0},v:{state:1,encode:0},t:{state:1,encode:0},md:{state:1,encode:0},oid:{state:1,encode:0},ac:{state:1,encode:1},st:{state:1,encode:0},vid:{state:1,encode:0}},pay:null,custom:null},htmlTagData:{access:[{columnName:"k4",tagIdent:"resourceType",identType:1,attrName:null,encode:0},{columnName:"k5",tagIdent:"ga_itemDataBean_itemID",identType:1,attrName:null,encode:0},{columnName:"K6",tagIdent:"URLPattern",identType:1,attrName:null,encode:0}],event:[{columnName:"k4",tagIdent:"resourceType",identType:1,attrName:null,encode:0}],search:[{columnName:"k4",tagIdent:"resourceType",identType:1,attrName:null,encode:0},{columnName:"k5",tagIdent:"sa_splited_key_words",identType:1,attrName:null,encode:0},{columnName:"k6",tagIdent:"otherCount",identType:1,attrName:null,encode:0},{columnName:"k7",tagIdent:"cityId",identType:1,attrName:null,encode:0},{columnName:"k8",tagIdent:"replace_key_words",identType:1,attrName:null,encode:0},{columnName:"k9",tagIdent:"kuozhan_key_words",identType:1,attrName:null,encode:0},{columnName:"k10",tagIdent:"searchCategory",identType:1,attrName:null,encode:0}],register:[{columnName:"k3",tagIdent:"resourceType",identType:1,attrName:null,encode:0}],hotclick:[{columnName:"k2",tagIdent:"resourceType",identType:1,attrName:null,encode:0},{columnName:"k3",tagIdent:"URLpattern",identType:1,attrName:null,encode:0}],cookie_mapping:null,product:null,storage:[{columnName:"k4",tagIdent:"shipOffset",identType:1,attrName:null,encode:0},{columnName:"k3",tagIdent:"resourceType",identType:1,attrName:null,encode:0},{columnName:"k5",tagIdent:"supplierID",identType:1,attrName:null,encode:0},{columnName:"k6",tagIdent:"shop_code",identType:1,attrName:null,encode:0},{columnName:"k7",tagIdent:"shop_name",identType:1,attrName:null,encode:1},{columnName:"k8",tagIdent:"mdmProvinceId",identType:1,attrName:null,encode:0},{columnName:"k9",tagIdent:"mdmDistrictId",identType:1,attrName:null,encode:0},{columnName:"k10",tagIdent:"vendorType",identType:1,attrName:null,encode:0},{columnName:"k11",tagIdent:"manageInvFlag",identType:1,attrName:null,encode:0},{columnName:"k12",tagIdent:"productStatusDesc",identType:1,attrName:null,encode:0},{columnName:"k13",tagIdent:"suppliernewID",identType:1,attrName:null,encode:0}],exposure:[{columnName:"k3",tagIdent:"resourceType",identType:1,attrName:null,encode:0},{columnName:"k4",tagIdent:"URLPattern",identType:1,attrName:null,encode:0}],shopping_cart:null,order:[{columnName:"k3",tagIdent:"resourceType",identType:1,attrName:null,encode:0}],pay:null,custom:null},jsVarData:{access:null,event:null,search:null,register:null,hotclick:null,cookie_mapping:null,product:null,storage:null,exposure:null,shopping_cart:null,order:null,pay:null,custom:null},cookieData:{access:[{columnName:"k1",cookieName:"idsLoginUserIdLastTime",cookieRule:null,encode:1},{columnName:"k3",cookieName:"logonStatus",cookieRule:null,encode:0},{columnName:"k2",cookieName:"custno",cookieRule:null,encode:0}],event:[{columnName:"k1",cookieName:"idsLoginUserIdLastTime",cookieRule:null,encode:1},{columnName:"k3",cookieName:"logonStatus",cookieRule:null,encode:0},{columnName:"k2",cookieName:"custno",cookieRule:null,encode:0}],search:[{columnName:"k1",cookieName:"idsLoginUserIdLastTime",cookieRule:null,encode:1},{columnName:"k2",cookieName:"logonStatus",cookieRule:null,encode:0},{columnName:"k3",cookieName:"custno",cookieRule:null,encode:0}],register:[{columnName:"k1",cookieName:"idsLoginUserIdLastTime",cookieRule:null,encode:1},{columnName:"k2",cookieName:"custno",cookieRule:null,encode:0}],hotclick:[{columnName:"k1",cookieName:"custno",cookieRule:null,encode:0}],cookie_mapping:null,product:null,storage:[{columnName:"k1",cookieName:"idsLoginUserIdLastTime",cookieRule:null,encode:1},{columnName:"k2",cookieName:"custno",cookieRule:null,encode:0}],exposure:[{columnName:"k1",cookieName:"idsLoginUserIdLastTime",cookieRule:null,encode:1},{columnName:"k2",cookieName:"custno",cookieRule:null,encode:0}],shopping_cart:null,order:[{columnName:"k1",cookieName:"idsLoginUserIdLastTime",cookieRule:null,encode:1},{columnName:"k2",cookieName:"custno",cookieRule:null,encode:0}],pay:null,custom:null},htmlPageRange:{access:[{include:0,pageIdent:"shouji.suning.com",pageMatchType:1}],event:null,search:null,register:null,hotclick:null,cookie_mapping:null,product:null,storage:null,exposure:null,shopping_cart:null,order:[{include:0,pageIdent:"payment.suning.com/epps-ppps/showCashierOne/show",pageMatchType:1}],pay:null,custom:null},cookieMapping:null,eventConfig:null,shoppingCart:null,order:{orderIdChannelType:1,orderIdChannelId:"orderId",orderIdChannelEncode:0,orderInfoChannelType:0,orderInfoChannelId:null,orderInfoChannelEncode:0,orderStateChannelType:0,orderStateChannelId:null,orderStateChannelEncode:0},pay:null};var Utils={getNowDateTime:function(){return(new Date).getTime()},isHttps:function(){return document.location.protocol==="https:"?true:false},getDomain:function(){return document.domain},isRegMatch:function(regExp,str){return new RegExp(regExp).test(str)},getDomainByUrl:function(url){var tmpdomain=url.substring(url.indexOf("/",url.indexOf("/")+1)+1);var domain=tmpdomain.substring(0,tmpdomain.indexOf("/"));return domain},isUseJQuery:function(){if(jQuery){return true}else{return false}},trim:function(str){return !str?"":str.replace(/(^\s*)|(\s*$)/g,"")},isNull:function(obj){return(undefined==obj||""==obj||_empty==obj)},isEmpty:function(obj){return(obj==undefined||obj==null||obj=="")},isArrayEmpty:function(obj){return(obj==undefined||obj==null||obj.length==0)},isObject:function(obj){return(typeof(obj)).toLowerCase()=="object"&&!this.isArrayEmpty(obj)},isArray:function(obj){return Object.prototype.toString.call(obj).toLowerCase()=="[object array]"},isFunction:function(obj){return(typeof(fun)).toLowerCase()=="function"},isContain:function(obj,str){return(obj.indexOf(str)>-1)},encode:function(uri,isEncodeURI){return isEncodeURI?encodeURI(uri):encodeURIComponent(uri)},decode:function(uri,isDecodeURI){return isDecodeURI?decodeURI(uri):decodeURIComponent(uri)},cutStr:function(str,len){if(!str){return""}if(str.length>len){str=str.substring(0,len)}return str},cutWord:function(word,flag){return word?word.substring(0,word.indexOf(flag)+flag.length):word},getNodeText:function(node,arr){try{if(node.nodeType==3){arr.push(node.nodeValue)}else{if(node.nodeType==1){for(var m=node.firstChild;m!=null;m=m.nextSibling){this.getNodeText(m,arr)}}}}catch(e){}},random:function(){return Math.round(Math.random()*2147483647)},sendByImg:function(url){var img=new Image(1,1);window.__n=img;img.onload=img.onerror=function(){window.__n=null;img=null};img.src=url},sendByIframe:function(url){if(document.body){var ifr=document.getElementById("_iframe_sa_sendByIframe");if(ifr){return false}ifr=document.createElement("iframe");ifr.id="_iframe_sa_sendByIframe";ifr.src=url;ifr.height="0";ifr.width="0";ifr.style.display="none";ifr.style.visibility="hidden";document.body.appendChild(ifr)}else{setTimeout(function(){Utils.sendByIframe(url)},100)}},sendByIframeImage:function(url){if(document.body){var ifr=document.createElement("iframe");ifr.height="0";ifr.width="0";ifr.style.display="none";ifr.style.visibility="hidden";var freeIfr=function(){ifr&&ifr.parentNode&&ifr.parentNode.removeChild(ifr)&&(ifr=null)};EventManager.addEvent(window,"beforeunload",freeIfr);var sucess=false;var ifrLoad=function(){if(!sucess){try{sucess=true;var iDoc=ifr.contentWindow.document;var iImg=iDoc.createElement("img");iImg.onload=iImg.onerror=function(){iImg.onload=iImg.onerror=null;iImg=null;freeIfr();if(window.removeEventListener){window.removeEventListener("beforeunload",freeIfr,false)}else{window.detachEvent&&window.detachEvent("onbeforeunload",freeIfr)}};iImg.src=url}catch(e){}}};EventManager.addEvent(ifr,"load",ifrLoad);document.body.appendChild(ifr)}else{setTimeout(function(){Utils.sendByIframeImage(url)},100)}},removeHTMLTag:function(str){if(this.isEmpty(str)){return str}str=str.replace(/<\/?[^>]*>/g,"");str=str.replace(/[ | ]*\n/g,"\n");str=str.replace(/\n[\s| | ]*\r/g,"\n");str=str.replace(/&nbsp;/ig,"");return str},removeEnterWrap:function(str){if(this.isEmpty(str)){return str}str=str.replace(/[\r\n]/g,"");str=str.replace(/[\r]/g,"");str=str.replace(/[\n]/g,"");return str},getMaskCode:function(str){var MASK_CODE="*";if(this.isEmpty(str)){return str}var code="";for(var i=0;i<str.length;i++){code=code+"*"}return code},isNumber:function(val){var reg=/^[0-9]$/;return reg.test(val)},isLetter:function(val){var reg=/^[A-Za-z]+$/;return reg.test(val)},isSpace:function(val){var reg=/\s/;return reg.test(val)},isChineseCharacter:function(val){var reg=new RegExp("[\\u4E00-\\u9FFF]+","g");return reg.test(val)},getOnlyId:function(){var now=new Date();var m=Math.round(100000*Math.random());var onlyId=now.getTime().toString().concat(m);return onlyId},getMapFromKeyValueArrs:function(keysArr,valuesArr){var map=new HashMap();for(var i=0;i<keysArr.length;i++){map.put(keysArr[i],valuesArr[i])}return map},getStrFromKeysArrAndValues:function(keysArr,valuesMap){var valuesStr="";for(var i=0;i<keysArr.length;i++){valuesStr=valuesStr+valuesMap.get(keysArr[i])+_tag}return valuesStr.substring(0,valuesStr.length-1)},pick:function(map,key,separator){var result="-",idx;if(!IsEmpty(map)&&!IsEmpty(key)&&!IsEmpty(separator)){idx=map.indexOf(key);if(idx>-1){var endIdx=map.indexOf(separator,idx);if(endIdx<0){endIdx=map.length}result=map.substring(idx+key.length+1,endIdx)}}return result},getDateYMD:function(datetime,datetype){try{var dateObj=datetime;if(datetype=="long"){dateObj=new Date(datetime)}return dateObj.getFullYear()+"-"+(dateObj.getMonth()+1)+"-"+dateObj.getDate()}catch(e){return null}}};var CookieUtils={getItem:function(sKey){if(!sKey){return null}return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)){return false}var sExpires="";if(vEnd){switch(vEnd.constructor){case Number:sExpires=vEnd===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+vEnd;break;case String:sExpires="; expires="+vEnd;break;case Date:sExpires="; expires="+vEnd.toGMTString();break}}document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+sExpires+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"")+(bSecure?"; secure":"");return true},removeItem:function(sKey,sPath,sDomain){if(!this.hasItem(sKey)){return false}CookieUtils.setItem(sKey,"","Thu, 01 Jan 1970 00:00:00 GMT",sPath,sDomain);return true},hasItem:function(sKey){if(!sKey){return false}return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)},keys:function(){var aKeys=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var nLen=aKeys.length,nIdx=0;nIdx<nLen;nIdx++){aKeys[nIdx]=decodeURIComponent(aKeys[nIdx])}return aKeys},set:function(name,value,expires,path,domain,secure){var text=encodeURIComponent(name)+"="+encodeURIComponent(value);if(expires instanceof Date){text+="; expires="+expires.toGMTString()}if(path){text+="; path="+path}if(domain){text+="; domain="+domain}if(secure){text+="; secure"}document.cookie=text}};var PageUtils={getPvId:function(){if(!_ssa.pvId){_ssa.pvId=Utils.getOnlyId()}return _ssa.pvId},getCurrentPageUrl:function(){return document.location.href},getFromPageUrl:function(){var fromUrl=document.referrer;var toUrl=document.location.href;var httpsUrl=CookieUtils.getItem(Config.cookieFromUrl);if(!fromUrl&&httpsUrl){if((location.protocol=="https:"&&fromUrl!=""&&httpsUrl.substring(0,6)=="https:"&&httpsUrl!=fromUrl)||(location.protocol=="http:"&&fromUrl==""&&httpsUrl.substring(0,6)=="https:")||(location.protocol=="https:"&&fromUrl==""&&httpsUrl.substring(0,6)=="https:")||(fromUrl!=""&&httpsUrl!=fromUrl)){fromUrl=httpsUrl}CookieUtils.removeItem(Config.cookieFromUrl,Config.cookiePath,Config.cookieDomain)}if(toUrl!=""&&(toUrl.indexOf("sourceUrl4Sa")!=-1)){var sourceUrl4Sa=Utils.pick(toUrl,"sourceUrl4Sa","&");fromUrl=sourceUrl4Sa}else{if((!fromUrl||fromUrl==null||fromUrl=="")&&toUrl!=""&&(toUrl.indexOf("returnUrl")!=-1)){var parms=toUrl.substring(toUrl.indexOf("?")+1,toUrl.length);var parmsArr=parms.split("&");for(var i=0;i<parmsArr.length;i++){var parmArr=parmsArr[i].split("=");if(parmArr[0]=="returnUrl"){fromUrl=parmArr[1]}}}}return fromUrl},getCurrentPageTitle:function(){return document.title},setFromPageUrlCookie:function(){var httpsUrl=CookieUtils.getItem(Config.cookieFromUrl);var currentUrl=this.getCurrentPageUrl();if(!httpsUrl||httpsUrl!=currentUrl){CookieUtils.setItem(Config.cookieFromUrl,currentUrl,"",Config.cookiePath,Config.cookieDomain)}},getUserAgent:function(){return ua},isCookieEnabled:function(){return navigator.cookieEnabled},isJavaEnabled:function(){return navigator.javaEnabled()},getTermType:function(){var info=this.getOSAndTer();return info.length>=2?info[1]:"unknown"},getOSType:function(){var info=this.getOSAndTer();return info.length>=1?info[0]:"unknown"},getSense:function(){return window.screen.width+"x"+window.screen.height},getPrinColor:function(){return window.screen.colorDepth+"bit"},getFlash:function(){try{var f="";var n=navigator;if(n.plugins&&n.plugins.length){for(var ii=0;ii<n.plugins.length;ii++){if(n.plugins[ii].name.indexOf("Shockwave Flash")!=-1){f=n.plugins[ii].description.split("Shockwave Flash ")[1].split(" ")[0];break}}}else{if(window.ActiveXObject){for(var ii=10;ii>=2;ii--){try{var fl=eval("new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+ii+"');");if(fl){f=ii+".0";break}}catch(e){}}}}if(f!=""){return 1}}catch(e){}return 0},getOSAndTer:function(){try{var os=[];if(/AppleWebKit.*Mobile/i.test(ua)||(/Android|SymbianOS|Windows Phone|Tablet PC|NOKIA|Nokia|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|SonyEricsson|SIE-|Amoi|ZTE/i.test(ua))){if(r=ua[m](/(iPhone|iPod touch|iPad).*(OS [\d_]+)/i)){os.push(r[2]);os.push(r[1])}else{if(r=ua[m](/(Windows Phone( | OS )[\d\.]+).*; ([^;]+)\)$/i)){os.push(r[1]);os.push(r[3])}else{if(r=ua[m](/; (Windows NT [\d\.]+).*(Tablet PC [\d\.]+).*\)$/i)){os.push(r[1]);os.push(r[2])}else{if(ua[i]("Windows Phone")>-1){os.push("Windows Phone");os.push(npo)}else{if(ua[i]("Windows NT")>-1){os.push("windows NT");os.push(npa)}else{if(r=ua[m](/(Android [\d\.]+);[^;]*; ([^\)]*?)\)/i)){os.push(r[1]);os.push(r[2])}else{if(ua[i]("Android")>-1&&(ua[i]("mobile")>-1||ua[i]("Mobile")>-1)){os.push("Android");os.push("Mobile")}else{if(ua[i]("Andriod")>-1){os.push("Android");os.push(npa)}else{os.push(n);os.push(n)}}}}}}}}}else{var isWin=(pf=="Win32")||(pf=="Windows");var isMac=(pf=="Mac68K")||(pf=="MacPPC")||(pf=="Macintosh")||(pf=="MacIntel");if(isMac){os.push("Mac")}var isUnix=(pf=="X11")&&!isWin&&!isMac;if(isUnix){os.push("Unix")}var isLinux=(pf[i]("Linux")>-1);if(isLinux){os.push("Linux")}if(isWin){var isWin2K=ua[i]("Windows NT 5.0")>-1||ua[i]("Windows 2000")>-1;if(isWin2K){os.push("Win2000")}var isWinXP=ua[i]("Windows NT 5.1")>-1||ua[i]("Windows XP")>-1;if(isWinXP){os.push("WinXP")}var isWin2003=ua[i]("Windows NT 5.2")>-1||ua[i]("Windows 2003")>-1;if(isWin2003){os.push("Win2003")}var isWin2003=ua[i]("Windows NT 6.0")>-1||ua[i]("Windows Vista")>-1;if(isWin2003){os.push("WinVista")}var isWin2003=ua[i]("Windows NT 6.1")>-1||ua[i]("Windows 7")>-1;if(isWin2003){os.push("Win7")}var isWin8=ua[i]("Windows NT 6.2")>-1;if(isWin8){os.push("Windows 8")}var isWin8_1=ua[i]("Windows NT 6.3")>-1;if(isWin8_1){os.push("Windows 8.1")}}os.push("PC")}if(os.length==0){os.push(n);os.push(n)}else{if(os.length==1){os.push(n)}}return os}catch(e){return[e+"",e+""]}return["unknown","unknown"]}};var EventManager={addEvent:function(element,type,callback){var _that=this;if(element.addEventListener){element.addEventListener(type,callback,false)}else{if(element.attachEvent){if(type.indexOf("custom")!=-1){if(isNaN(element[type])){element[type]=0}var fnEv=function(event){event=event?event:window.event;if(event.propertyName==type){callback.call(element)}};element.attachEvent("onpropertychange",fnEv);if(!element["callback"+callback]){element["callback"+callback]=fnEv}}else{element.attachEvent("on"+type,callback)}}else{element["on"+type]=callback}}return _that},removeEvent:function(element,type,callback){var _that=this;if(element.removeEventListener){element.removeEventListener(type,callback,false)}else{if(element.detachEvent){if(type.indexOf("custom")!=-1){element.detachEvent("onpropertychange",element["callback"+callback]);element["callback"+callback]=null}else{element.detachEvent("on"+type,callback)}}else{element["on"+type]=null}}return _that},triggerEvent:function(element,type){var _that=this;try{if(element.dispatchEvent){var evt=document.createEvent("Event");evt.initEvent(type,true,true);element.dispatchEvent(evt)}else{if(element.fireEvent){if(type.indexOf("custom")!=-1){element[type]++}else{element.fireEvent("on"+type)}}}}catch(e){}return _that},bind:function(obj,handler){obj=obj||window;var args=[];for(var i=2;i<arguments.length;i++){args.push(arguments[i])}return function(){handler.apply(obj,args)}}};var UserAccess={setVisitorCookie:function(map){var _ssavMap=map;var vType=1;if(!map||map.size()==0){_ssavMap=this.getVisitorCookieMap();_ssavMap.put("lastViewTime",_ssavMap.get("thisViewTime"));_ssavMap.put("thisViewTime",Utils.getNowDateTime());_ssavMap.put("totalPvs",Number(_ssavMap.get("totalPvs"))+1);var firstViewTime=_ssavMap.get("firstViewTime");var firstViewDay=Utils.getDateYMD(Number(firstViewTime),"long");var currentDay=Utils.getDateYMD(new Date(),"date");var totalPvs=Number(_ssavMap.get("totalPvs"));if(_ssavMap.get("vType")){vType=Number(_ssavMap.get("vType"))}else{vType=1}if(firstViewDay==currentDay){if(totalPvs<=1){vType=1}}else{if(totalPvs>1){vType=0}}_ssavMap.put("vType",vType)}var _ssavStr=Utils.getStrFromKeysArrAndValues(Config.cookieVisitorKeys,_ssavMap);var expiresDate=new Date();expiresDate.setTime(expiresDate.getTime()+expires_ms_2years);CookieUtils.setItem(Config.cookieVisitorId,_ssavStr,expiresDate,Config.cookiePath,Config.cookieDomain);var _snmaStr=CookieUtils.getItem(Config.ssa1_visitorCookieId);if(_snmaStr&&_snmaStr!=null&&_snmaStr!=""){var _snmaArr=_snmaStr.split(_tag);var _snmaMap=Utils.getMapFromKeyValueArrs(Config.ssa1_visitorCookieKeys,_snmaArr);visitorId=_snmaMap.get("visitorid")}if(!visitorId){visitorId=_ssavMap.get("visitorId")}newVisitorFlg=vType},getVisitorCookieMap:function(){var _ssavStr=CookieUtils.getItem(Config.cookieVisitorId);if(_ssavStr){var _ssavArr=_ssavStr.split(_tag);return Utils.getMapFromKeyValueArrs(Config.cookieVisitorKeys,_ssavArr)}else{var now=Utils.getNowDateTime();var _vId=Utils.getOnlyId();var _snmaStr=CookieUtils.getItem(Config.ssa1_visitorCookieId);if(_snmaStr&&_snmaStr!=null&&_snmaStr!=""){var _snmaArr=_snmaStr.split(_tag);var _snmaMap=Utils.getMapFromKeyValueArrs(Config.ssa1_visitorCookieKeys,_snmaArr);_vId=_snmaMap.get("visitorid");if(!_vId){_vId=Utils.getOnlyId()}}var _ssavArr=[_vId,now,now,now,0,0,1];return Utils.getMapFromKeyValueArrs(Config.cookieVisitorKeys,_ssavArr)}},setSessionCookie:function(map){var _ssasMap=map;if(!map){_ssasMap=this.getSessionCookieMap();_ssasMap.put("outTime",Utils.getNowDateTime());_ssasMap.put("views",Number(_ssasMap.get("views"))+1)}var _ssasStr=Utils.getStrFromKeysArrAndValues(Config.cookieSessionKeys,_ssasMap);var expiresDate=new Date();expiresDate.setTime(expiresDate.getTime()+expires_ms_30mins);CookieUtils.setItem(Config.cookieSessionId,_ssasStr,expiresDate,Config.cookiePath,Config.cookieDomain);sessionId=_ssasMap.get("sessionId")},getSessionCookieMap:function(){var ssarMap;var ssasStr=CookieUtils.getItem(Config.cookieSessionId);if(ssasStr){var ssarArr=ssasStr.split(_tag);ssarMap=Utils.getMapFromKeyValueArrs(Config.cookieSessionKeys,ssarArr);if(_crossDayFlag===0){var __inTime=ssarMap.get("inTime");if(__inTime&&/\d/.test(__inTime)){var _inDate=new Date(Number(__inTime)).getDate();if(new Date().getDate()==_inDate+1){_inTime=__inTime;_crossDayFlag++;return this.newSession()}}}return ssarMap}else{return this.newSession()}},newSession:function(){if(_pvFlag===0){var _ssavMap=this.getVisitorCookieMap();_ssavMap.put("totalVisits",Number(_ssavMap.get("totalVisits"))+1);this.setVisitorCookie(_ssavMap);_pvFlag++}var sessionId=Utils.getOnlyId(),ssasArr=[sessionId,_inTime,_no_data_tag,0],ssasMap=Utils.getMapFromKeyValueArrs(Config.cookieSessionKeys,ssasArr);return ssasMap},refreshSsasInTime:function(){var _ssasMap=this.getSessionCookieMap();_ssasMap.put("inTime",Utils.getNowDateTime());this.setSessionCookie(_ssasMap)}};var MediumSource={getSourceMapFromCookie:function(){var _ssarStr=CookieUtils.getItem(Config.cookieSourceId);if(_ssarStr){var _ssarArr=_ssarStr.split(_tag);return Utils.getMapFromKeyValueArrs(Config.cookieSourceKeys,_ssarArr)}else{var _ssarArr=[Config.sourceMediumArr[0],Config.sourceMediumArr[0],_no_data_tag,_no_data_tag,_no_data_tag];return Utils.getMapFromKeyValueArrs(Config.cookieSourceKeys,_ssarArr)}},checkSource:function(ssarMap){try{var keyArr=Config.searchKeyWords;var int_i=0;var int_j=0;if(!_fromPageUrl&&_fromPageUrl!=""){for(var i=0;i<Config.searchers.length;i++){var _searcher=Config.searchers[i];if(_fromPageUrl.indexOf(_searcher)!=-1){ssarMap.put("source",_searcher.substring(1,_searcher.length));ssarMap.put("medium",Config.sourceMediumArr[1]);ssarMap.put("content",_no_data_tag);ssarMap.put("campaign",_no_data_tag);ssarMap.put("theme",_no_data_tag);var parms=_fromPageUrl.substring(_fromPageUrl.indexOf("?")+1,_fromPageUrl.length);var parmsArr=parms.split("&");for(var ii=0;ii<parmsArr.length;ii++){var parmArr=parmsArr[ii].split("=");for(var j=0;j<keyArr.length;j++){if(keyArr[j]==parmArr[0]){ssarMap.put("medium",Config.sourceMediumArr[2]);ssarMap.put("theme",parmArr[1]+_splited);break}}int_j=j;if(int_j<keyArr.length){break}}break}}int_i=i;if(int_i==Config.searchers.length||(int_i<Config.searchers.length&&int_j==keyArr.length)){var toDomain=Utils.getDomainByUrl(_currentPageUrl);var fromDomain=Utils.getDomainByUrl(_fromPageUrl);if(fromDomain.indexOf(Config.cookieDomain)==-1){ssarMap.put("source",Utils.getDomainByUrl(_fromPageUrl));ssarMap.put("medium",Config.sourceMediumArr[1]);ssarMap.put("content",_no_data_tag);ssarMap.put("campaign",_no_data_tag);ssarMap.put("theme",_no_data_tag);for(var i=0;i<Config.searchers.length;i++){var _searcher=Config.searchers[i];if(_fromPageUrl.indexOf(_searcher)!=-1){ssarMap.put("source",_searcher.substring(1,_searcher.length));break}}}}}}catch(e){}return ssarMap},checkCookieSsar:function(ssarMap){try{if(_currentPageUrl!=""&&(_currentPageUrl.indexOf("utm_source")>0||_currentPageUrl.indexOf("utm_medium")>0||_currentPageUrl.indexOf("utm_content")>0||_currentPageUrl.indexOf("utm_campaign")>0||_currentPageUrl.indexOf("utm_term")>0)){var parms=_currentPageUrl.substring(_currentPageUrl.indexOf("?")+1,_currentPageUrl.length);var parmsArr=parms.split("&");for(var i=0;i<parmsArr.length;i++){var parmArr=parmsArr[i].split("=");if(parmArr[0]=="utm_source"){ssarMap.put("source",parmArr[1])}else{if(parmArr[0]=="utm_medium"){ssarMap.put("medium",parmArr[1])}else{if(parmArr[0]=="utm_content"){ssarMap.put("content",parmArr[1])}else{if(parmArr[0]=="utm_campaign"){ssarMap.put("campaign",parmArr[1])}else{if(parmArr[0]=="utm_term"){var tmpVar=ssarMap.get("theme");var fromUrl_utm_term=tmpVar?Utils.cutWord(tmpVar,_splited):(_no_data_tag+_splited);ssarMap.put("theme",fromUrl_utm_term+parmArr[1])}}}}}}}}catch(e){}return ssarMap},setSsarCookie:function(map){var _tempMap=this.getSourceMapFromCookie();var _tempMapArr=Utils.getStrFromKeysArrAndValues(Config.cookieSourceKeys,_tempMap),_mapArr=Utils.getStrFromKeysArrAndValues(Config.cookieSourceKeys,map);if(!CookieUtils.getItem(Config.cookieSourceId)||_tempMapArr!=_mapArr){var ssarStr=Utils.getStrFromKeysArrAndValues(Config.cookieSourceKeys,map);var expiresDate=new Date();expiresDate.setTime(expiresDate.getTime()+expires_ms_24hours);CookieUtils.setItem(Config.cookieSourceId,ssarStr,expiresDate,Config.cookiePath,Config.cookieDomain);var _ssasMap=UserAccess.getSessionCookieMap();_inTime=_ssasMap.get("inTime");CookieUtils.removeItem(Config.cookieSessionId,Config.cookiePath,Config.cookieDomain)}},init:function(){var _ssarMap=this.getSourceMapFromCookie();_ssarMap=this.checkSource(_ssarMap);_ssarMap=this.checkCookieSsar(_ssarMap);this.setSsarCookie(_ssarMap)}};var SSATracker={startTracker:function(){this.pv();this.setEvent();this.register();this.hotClick();this.cookieMapping();this.shoppingCart();this.order();this.pay()},isCollect:function(_type){if(!FieldConfig.htmlPageRange){return true}var def=null;try{def=eval("FieldConfig.htmlPageRange."+_type)}catch(e){}if(!def){return true}var curl=document.location.href,conf=null;var isMatched=false;for(var i=0;i<def.length;i++){conf=def[i];switch(conf.pageMatchType){case 0:if(curl==conf.pageIdent){isMatched=true}break;case 1:if(curl.indexOf(conf.pageIdent)!=-1){isMatched=true}break;case 2:if(Utils.getDomain()==conf.pageIdent){isMatched=true}break;case 3:if(Utils.isRegMatch(conf.pageIdent,curl)){isMatched=true}break}}if(!conf){return true}if(!conf.include){return isMatched}else{return !isMatched}},getCommonData:function(typeId,typeName){if(!FieldConfig.commonData){return"1=1"}var def=null;try{def=eval("FieldConfig.commonData."+typeName)}catch(e){}!def&&(def=FieldConfig.commonData.all);if(!def){return"1=1"}var comm="1=1";comm=comm+"&id="+Utils.getOnlyId();if(def.t&&def.t.state){if(def.t.encode){comm=comm+"&t="+Utils.encode(typeId)}else{comm=comm+"&t="+typeId}}if(def.i&&def.i.state){if(def.i.encode){comm=comm+"&i="+Utils.encode(Config.websiteId)}else{comm=comm+"&i="+Config.websiteId}}if(def.v&&def.v.state){if(def.v.encode){comm=comm+"&v="+Utils.encode(Config.versionId)}else{comm=comm+"&v="+Config.versionId}}if(def.ct&&def.ct.state){if(def.ct.encode){comm=comm+"&ct="+Utils.encode(Utils.getNowDateTime())}else{comm=comm+"&ct="+Utils.getNowDateTime()}}if(def.vid&&def.vid.state){if(def.vid.encode){comm=comm+"&vid="+Utils.encode(visitorId)}else{comm=comm+"&vid="+visitorId}}if(def.sid&&def.sid.state){if(def.sid.encode){comm=comm+"&sid="+Utils.encode(sessionId)}else{comm=comm+"&sid="+sessionId}}if(def.pid&&def.pid.state){if(def.pid.encode){comm=comm+"&pid="+Utils.encode(PageUtils.getPvId())}else{comm=comm+"&pid="+PageUtils.getPvId()}}if(def.vt&&def.vt.state){if(def.vt.encode){comm=comm+"&vt="+Utils.encode(newVisitorFlg)}else{comm=comm+"&vt="+newVisitorFlg}}if(def.curl&&def.curl.state){if(def.curl.encode){comm=comm+"&curl="+Utils.encode(Utils.cutStr(_currentPageUrl,Config.maxLength))}else{comm=comm+"&curl="+Utils.cutStr(_currentPageUrl,Config.maxLength)}}if(def.furl&&def.furl.state){if(def.furl.encode){comm=comm+"&furl="+Utils.encode(Utils.cutStr(_fromPageUrl,Config.maxLength))}else{comm=comm+"&furl="+Utils.cutStr(_fromPageUrl,Config.maxLength)}}if(def.sr||def.md||def.con||def.ac||def.th){var sr=_no_data_tag,md=_no_data_tag,con=_no_data_tag,ac=_no_data_tag,th=_no_data_tag;var sourceMap=MediumSource.getSourceMapFromCookie();if(sourceMap){sr=sourceMap.get("source");md=sourceMap.get("medium");con=Utils.encode(sourceMap.get("content"));ac=Utils.encode(sourceMap.get("campaign"));th=Utils.encode(sourceMap.get("theme"))}comm+=(def.sr&&"&sr="+sr)+(def.md&&"&md="+md)+(def.con&&"&con="+con)+(def.ac&&"&ac="+ac)+(def.th&&"&th="+th)}return comm},getCookieData:function(typeName){if(!FieldConfig.cookieData){return"2=2"}var def=null;try{def=eval("FieldConfig.cookieData."+typeName)}catch(e){}if(!def||def.length==0){return"2=2"}var str="2=2",conf=null,cookieValue="",ruleArr=null,cookieValueArr=null,coookieValueIndex;for(var i=0;i<def.length;i++){conf=def[i];cookieValue=CookieUtils.getItem(conf.cookieName);if(cookieValue&&conf.cookieRule){ruleArr=conf.cookieRule.split(",");if(ruleArr.length>=2){var cookieValueArr=cookieValue.split(ruleArr[0].replace(/'/g,""));var coookieValueIndex=Number(ruleArr[1]);if(cookieValueArr&&cookieValueArr.length>=coookieValueIndex){cookieValue=cookieValueArr[coookieValueIndex-1]}}}if(!cookieValue){cookieValue=""}str=str+"&"+conf.columnName+"="+(conf.encode?Utils.encode(cookieValue):cookieValue)}return str},getHtmlTagData:function(typeName){if(!FieldConfig.htmlTagData){return"3=3"}var def=null;try{def=eval("FieldConfig.htmlTagData."+typeName)}catch(e){}if(!def||def.length==0){return"3=3"}var str="3=3",conf=null,htmlTag,htmlTags,htmlTagAttrName="value",htmlTagValue=_no_data_tag;for(var i=0;i<def.length;i++){conf=def[i];if(!conf.tagIdent){continue}if(conf.identType==1){htmlTag=document.getElementById(conf.tagIdent)}else{htmlTags=document.getElementsByName(conf.tagIdent);if(htmlTags&&htmlTags.length>0){htmlTag=htmlTags[0]}}if(!htmlTag){htmlTagValue=""}else{htmlTagAttrName=conf.attrName;if(!htmlTagAttrName){htmlTagAttrName="value"}htmlTagValue=htmlTag.getAttribute(htmlTagAttrName);if(!htmlTagValue){htmlTagValue=""}}if(conf.tagIdent=="resourceType"&&htmlTagValue==""){htmlTagValue="web"}str=str+"&"+conf.columnName+"="+(conf.encode?Utils.encode(htmlTagValue):htmlTagValue)}return str},getJsVarData:function(typeName){if(!FieldConfig.jsVarData){return"4=4"}var def=null;try{def=eval("FieldConfig.jsVarData."+typeName)}catch(e){}if(!def||def.length==0){return"4=4"}var str="4=4",conf=null,varValue=_no_data_tag;for(var i=0;i<def.length;i++){conf=def[i];if(!conf.varName){continue}try{if(conf.varType==1){eval("varValue = "+conf.varName)}else{eval("varValue = "+conf.varName+"()")}}catch(e){}if(!varValue){varValue=_no_data_tag}str=str+"&"+conf.columnName+"="+(conf.encode?Utils.encode(varValue):varValue)}return str},getServer:function(method){var serverUrl=Config.ssaBaseUrl;if(!serverUrl){return null}if(Utils.isHttps()==true&&serverUrl.indexOf("http:")!=-1){serverUrl=serverUrl.replace("http:","https:")}return serverUrl+"/"+method},send:function(typeId,typeName,params){!params&&(params="0=0");params=SSATracker.getCommonData(typeId,typeName)+"&"+SSATracker.getCookieData(typeName)+"&"+SSATracker.getHtmlTagData(typeName)+"&"+SSATracker.getJsVarData(typeName)+"&"+params;var url=SSATracker.getServer(Config.apiName);if(!url){return}url=url+"?"+params;Utils.sendByImg(url)},sendClickPoint:function(isFourceSend){if(!isFourceSend){isFourceSend=false}if(_ssa.hotClickObj.count==0){return false}if(!isFourceSend&&_ssa.hotClickObj.count<10){return false}var _clickPoints=Utils.encode(_ssa.hotClickObj.pointSet),userAgent=Utils.encode(PageUtils.getUserAgent());var params="xy="+_clickPoints+"&ua="+userAgent+"&se="+PageUtils.getSense()+"&col="+PageUtils.getPrinColor();SSATracker.send(FieldConfig.dataType.hotclick,"hotclick",params);_ssa.hotClickObj.pointSet="";_ssa.hotClickObj.count=0},sendEvent:function(eventType,tagAttr,attrKey,targetObj){var element=targetObj;if(!element){var theEvent=window.event||arguments.callee.caller.arguments[0];if(!theEvent){return}element=theEvent.srcElement?theEvent.srcElement:theEvent.target}if(!element){return}var params="0=0";var tid=element.getAttribute("id");if(!tid){tid=""}var tname=element.getAttribute("name");if(!tname){tname=""}var _strings=new Array();var _text=(Utils.getNodeText(element,_strings),_strings)?Utils.encode(_strings.join("").replace(/\s|\|/ig,"")):"";var title=element.getAttribute("title");if(title){title=Utils.encode(title)}else{title=""}params=params+"&tid="+tid+"&tname="+tname+"&text="+_text+"&title="+title+"&env="+eventType;if(tagAttr&&attrKey){var tagAttrs=tagAttr.split(",");var attrKeys=attrKey.split(",");var attrName,keyName,attr;if(tagAttrs.length==attrKeys.length){for(var i=0;i<tagAttrs.length;i++){attrName=tagAttrs[i];keyName=attrKeys[i];attr=element.getAttribute(attrName);if(attr){params=params+"&"+keyName+"="+Utils.encode(attr)}else{params=params+"&"+keyName+"="}}}}SSATracker.send(FieldConfig.dataType.event,"event",params)},pv:function(){try{if(!FieldConfig.collectFlg.access){return}var _type="access";if(!SSATracker.isCollect(_type)){return}if(_ssa.pvSend&&_ssa.pvSend==true){return}UserAccess.setVisitorCookie();MediumSource.init();UserAccess.setSessionCookie();var ssasMap=UserAccess.getSessionCookieMap(),sec=1;if(ssasMap){sec=ssasMap.get("views")||1}var params="0=0";var conf=FieldConfig.commonData.access;if(!conf){params="ua="+Utils.encode(PageUtils.getUserAgent())+"&se="+PageUtils.getSense()+"&col="+PageUtils.getPrinColor()+"&flash="+PageUtils.getFlash()+"&java="+PageUtils.isJavaEnabled()+"&ck="+PageUtils.isCookieEnabled()+"&ter="+Utils.encode(PageUtils.getTermType())+"&ptitle="+Utils.encode(Utils.cutStr(PageUtils.getCurrentPageTitle(),Config.maxLength))+"&os="+Utils.encode(PageUtils.getOSType())+"&sec="+sec}else{if(conf.ua&&conf.ua.state){if(conf.ua.encode){params=params+"&ua="+Utils.encode(PageUtils.getUserAgent())}else{params=params+"&ua="+PageUtils.getUserAgent()}}if(conf.se&&conf.se.state){if(conf.se.encode){params=params+"&se="+Utils.encode(PageUtils.getSense())}else{params=params+"&se="+PageUtils.getSense()}}if(conf.col&&conf.col.state){if(conf.col.encode){params=params+"&col="+Utils.encode(PageUtils.getPrinColor())}else{params=params+"&col="+PageUtils.getPrinColor()}}if(conf.flash&&conf.flash.state){if(conf.flash.encode){params=params+"&flash="+Utils.encode(PageUtils.getFlash())}else{params=params+"&flash="+PageUtils.getFlash()}}if(conf.java&&conf.java.state){if(conf.java.encode){params=params+"&java="+Utils.encode(PageUtils.isJavaEnabled())}else{params=params+"&java="+PageUtils.isJavaEnabled()}}if(conf.ck&&conf.ck.state){if(conf.ck.encode){params=params+"&ck="+Utils.encode(PageUtils.isCookieEnabled())}else{params=params+"&ck="+PageUtils.isCookieEnabled()}}if(conf.ter&&conf.ter.state){if(conf.ter.encode){params=params+"&ter="+Utils.encode(PageUtils.getTermType())}else{params=params+"&ter="+PageUtils.getTermType()}}if(conf.pf&&conf.pf.state){if(conf.pf.encode){params=params+"&pf="+Utils.encode(pf)}else{params=params+"&pf="+pf}}if(conf.os&&conf.os.state){if(conf.os.encode){params=params+"&os="+Utils.encode(PageUtils.getOSType())}else{params=params+"&os="+PageUtils.getOSType()}}if(conf.ptitle&&conf.ptitle.state){if(conf.ptitle.encode){params=params+"&ptitle="+Utils.encode(Utils.cutStr(PageUtils.getCurrentPageTitle(),Config.maxLength))}else{params=params+"&ptitle="+Utils.cutStr(PageUtils.getCurrentPageTitle(),Config.maxLength)}}if(conf.sec&&conf.sec.state){if(conf.sec.encode){params=params+"&sec="+Utils.encode(sec)}else{params=params+"&sec="+sec}}}SSATracker.send(FieldConfig.dataType.access,_type,params);_ssa.pvSend=true;UserAccess.refreshSsasInTime()}catch(e){}},setEvent:function(){if(!FieldConfig.collectFlg.event){return}var _type="event";var def=FieldConfig.eventConfig;if(!def||def.length==0){return}var curl=document.location.href,conf=null,isMatched=false;for(var i=0;i<def.length;i++){conf=def[i];if(!conf.tagIdent){continue}isMatched=false;if(conf.pageIdent){switch(conf.pageMatchRule){case 0:if(curl==conf.pageIdent){isMatched=true}break;case 1:if(curl.indexOf(conf.pageIdent)!=-1){isMatched=true}break;case 2:if(Utils.getDomain()==conf.pageIdent){isMatched=true}break;case 3:if(Utils.isRegMatch(conf.pageIdent,curl)){isMatched=true}break}}else{isMatched=true}if(!isMatched){continue}if(conf.tagMatchRule==0){try{if(Utils.isUseJQuery()){$("#"+conf.tagIdent).live(conf.eventType,{eventType:conf.eventType,tagAttr:conf.tagAttr,attrKey:conf.attrKey},function(event){SSATracker.sendEvent(event.data.eventType,event.data.tagAttr,event.data.attrKey,this)})}else{var element=document.getElementById(conf.tagIdent);if(!element){continue}EventManager.addEvent(element,conf.eventType,EventManager.bind(element,SSATracker.sendEvent,conf.eventType,conf.tagAttr,conf.attrKey,element))}}catch(e){}}else{if(conf.tagMatchRule==1){try{if(Utils.isUseJQuery()){$("[name='"+conf.tagIdent+"']").live(conf.eventType,{eventType:conf.eventType,tagAttr:conf.tagAttr,attrKey:conf.attrKey},function(event){SSATracker.sendEvent(event.data.eventType,event.data.tagAttr,event.data.attrKey,this)})}else{var elements=document.getElementsByName(conf.tagIdent);if(!elements){continue}for(var j=0;j<elements.length;j++){EventManager.addEvent(elements[j],conf.eventType,EventManager.bind(elements[j],SSATracker.sendEvent,conf.eventType,conf.tagAttr,conf.attrKey,elements[j]))}}}catch(e){}}else{if(conf.tagMatchRule==2){try{if(Utils.isUseJQuery()){$("'"+conf.tagIdent+"'").live(conf.eventType,{eventType:conf.eventType,tagAttr:conf.tagAttr,attrKey:conf.attrKey},function(event){SSATracker.sendEvent(event.data.eventType,event.data.tagAttr,event.data.attrKey,this)})}else{var tags=document.getElementsByTagName(conf.tagIdent);if(!tags){continue}var element;for(var j=0;j<tags.length;j++){element=tags[j];EventManager.addEvent(element,conf.eventType,EventManager.bind(element,SSATracker.sendEvent,conf.eventType,conf.tagAttr,conf.attrKey,element))}}}catch(e){}}else{if(conf.tagMatchRule==3){try{$(conf.tagIdent).live(conf.eventType,{eventType:conf.eventType,tagAttr:conf.tagAttr,attrKey:conf.attrKey},function(event){SSATracker.sendEvent(event.data.eventType,event.data.tagAttr,event.data.attrKey,this)})}catch(e){}}}}}}},multiData:function(type,data){if(!type||!data){return}var Types=FieldConfig.dataType;if(type==Types.search){SSATracker.search(data.keyWords,data.count)}else{if(type==Types.product){SSATracker.product(data.productId,data.productName,data.categoryId,data.categoryName,data.price,data.productUrl)}else{if(type==Types.storage){SSATracker.storage(data.productId,data.productState,data.city)}else{if(type==Types.exposure){SSATracker.expoData(data.expoData,data.expoType)}else{if(type==Types.custom){SSATracker.custom(data.eventId,data.eventInfo)}}}}}},search:function(keyWord,count){try{if(!FieldConfig.collectFlg.search){return}var _type="search";var params="swd="+Utils.encode(keyWord)+"&sct="+count;SSATracker.send(FieldConfig.dataType.search,_type,params)}catch(e){}},register:function(){try{if(!FieldConfig.collectFlg.register){return}var _type="register";if(!SSATracker.isCollect(_type)){return}SSATracker.send(FieldConfig.dataType.register,_type)}catch(e){}},hotClick:function(){try{if(!FieldConfig.collectFlg.hotclick){return}var _type="hotclick";if(!SSATracker.isCollect(_type)){return}EventManager.addEvent(document,"click",function(event){try{var xPos=0,yPos=0;var evt=event||window.event||arguments[0];if(evt.pageX){xPos=evt.pageX;yPos=evt.pageY}else{xPos=evt.clientX+document.body.scrollLeft-document.body.clientLeft;yPos=evt.clientY+document.body.scrollTop-document.body.clientTop}xPos=((xPos+"").indexOf(".")!=-1)?xPos.toFixed(2):xPos;yPos=((yPos+"").indexOf(".")!=-1)?yPos.toFixed(2):yPos;var str="("+xPos+","+yPos+")";if(_ssa.hotClickObj.pointSet==""){_ssa.hotClickObj.pointSet=str}else{_ssa.hotClickObj.pointSet=_ssa.hotClickObj.pointSet+";"+str}_ssa.hotClickObj.count=_ssa.hotClickObj.count+1;SSATracker.sendClickPoint()}catch(e){}});EventManager.addEvent(window,"unload",function(event){SSATracker.sendClickPoint(true)})}catch(e){}},cookieMapping:function(){try{if(!FieldConfig.collectFlg.cookie_mapping){return}var _type="cookie_mapping";if(!SSATracker.isCollect(_type)){return}var def=FieldConfig.cookieMapping;if(!def||def.length==0){return}var url,conf=null,cookieValue="",ruleArr=null,cookieValueArr=null,coookieValueIndex;for(var i=0;i<def.length;i++){conf=def[i];if(document.location.protocol=="https:"&&conf.url.indexOf("http:")==0){continue}if(document.location.protocol=="http:"&&conf.url.indexOf("https:")==0){continue}cookieValue=CookieUtils.getItem(conf.cookieName);if(cookieValue&&conf.cookieRule){ruleArr=conf.cookieRule.split(",");if(ruleArr.length>=2){var cookieValueArr=cookieValue.split(ruleArr[0].replace(/'/g,""));var coookieValueIndex=Number(ruleArr[1]);if(cookieValueArr.length>=coookieValueIndex){cookieValue=cookieValueArr[coookieValueIndex-1]}}}if(!cookieValue){cookieValue=""}url=conf.url;url+=(conf.encode?Utils.encode(cookieValue):cookieValue);if(conf.timestamp){url+="&"+conf.timestamp+"="+Utils.getNowDateTime()}Utils.sendByIframeImage(url)}}catch(e){}},product:function(productId,productName,categoryId,categoryName,price,productUrl){try{if(!FieldConfig.collectFlg.product){return}if(!productId||!productName){return}var _type="product";var params="pc="+productId+"&pn="+Utils.encode(productName)+"&pt="+Utils.encode(categoryId)+"&tn="+Utils.encode(categoryName)+"&price="+Utils.encode(price)+"&pimg="+Utils.encode(productUrl);SSATracker.send(FieldConfig.dataType.product,_type,params)}catch(e){}},storage:function(productId,productState,city){try{if(!FieldConfig.collectFlg.storage){return}var _type="storage";var params="pc="+productId+"&ps="+productState+"&city="+Utils.encode(city);SSATracker.send(FieldConfig.dataType.storage,_type,params)}catch(e){}},expoData:function(expoData,expoType){try{if(!FieldConfig.collectFlg.exposure){return}if(!expoData){return}var _type="exposure";var params="exp="+Utils.encode(expoData)+"&etype="+expoType;SSATracker.send(FieldConfig.dataType.exposure,_type,params)}catch(e){}},shoppingCart:function(){try{if(!FieldConfig.collectFlg.shopping_cart){return}if(!FieldConfig.shoppingCart){return}var _type="shopping_cart";if(!SSATracker.isCollect(_type)){return}var sInfo="";if(FieldConfig.shoppingCart.channelId){if(FieldConfig.shoppingCart.channelType==1){var sInfoElement=document.getElementById(FieldConfig.shoppingCart.channelId);if(sInfoElement){sInfo=sInfoElement.value}}else{if(FieldConfig.shoppingCart.channelType==2){sInfo=eval(FieldConfig.shoppingCart.channelId)}else{if(FieldConfig.shoppingCart.channelType==3){sInfo=CookieUtils.getItem(FieldConfig.shoppingCart.channelId)}}}if(!sInfo){sInfo=""}if(FieldConfig.shoppingCart.channelEncode){sInfo=Utils.encode(sInfo)}}var params="info="+sInfo;SSATracker.send(FieldConfig.dataType.shopping_cart,_type,params)}catch(e){}},order:function(){try{if(!FieldConfig.collectFlg.order){return}if(!FieldConfig.order){return}var _type="order";if(!SSATracker.isCollect(_type)){return}var orderId="",orderInfo="",orderState="";if(FieldConfig.order.orderIdChannelId){if(FieldConfig.order.orderIdChannelType==1){var orderIdElement=document.getElementById(FieldConfig.order.orderIdChannelId);if(orderIdElement){orderId=orderIdElement.value}}else{if(FieldConfig.order.orderIdChannelType==2){orderId=eval(FieldConfig.order.orderIdChannelId)}else{if(FieldConfig.order.orderIdChannelType==3){orderId=CookieUtils.getItem(FieldConfig.order.orderIdChannelId)}}}if(!orderId){orderId=""}if(orderId&&FieldConfig.order.orderIdChannelEncode){orderId=Utils.encode(orderId)}}if(!orderId){return}if(FieldConfig.order.orderInfoChannelId){if(FieldConfig.order.orderInfoChannelType==1){var orderInfoElement=document.getElementById(FieldConfig.order.orderInfoChannelId);if(orderInfoElement){orderInfo=orderInfoElement.value}}else{if(FieldConfig.order.orderInfoChannelType==2){orderInfo=eval(FieldConfig.order.orderInfoChannelId)}else{if(FieldConfig.order.orderInfoChannelType==3){orderInfo=CookieUtils.getItem(FieldConfig.order.orderInfoChannelId)}}}if(!orderInfo){orderInfo=""}if(orderInfo&&FieldConfig.order.orderInfoChannelEncode){orderInfo=Utils.encode(orderInfo)}}if(FieldConfig.order.orderStateChannelId){if(FieldConfig.order.orderStateChannelType==1){var orderStateElement=document.getElementById(FieldConfig.order.orderStateChannelId);if(orderStateElement){orderState=orderStateElement.value}}else{if(FieldConfig.order.orderStateChannelType==2){orderState=eval(FieldConfig.order.orderStateChannelId)}else{if(FieldConfig.order.orderStateChannelType==3){orderState=CookieUtils.getItem(FieldConfig.order.orderStateChannelId)}}}if(!orderState){orderState=""}if(orderState&&FieldConfig.order.orderStateChannelEncode){orderState=Utils.encode(orderState)}}var params="oid="+orderId+"&oin="+orderInfo+"&ost="+orderState;SSATracker.send(FieldConfig.dataType.order,_type,params)}catch(e){}},orderAPI:function(orderId,orderInfo,orderState){try{if(!FieldConfig.collectFlg.order){return}if(!orderId){return}var _type="order";var params="oid="+orderId+"&oin="+Utils.encode(orderInfo)+"&ost="+orderState;SSATracker.send(FieldConfig.dataType.order,_type,params)}catch(e){}},pay:function(orderId,money,state,payType){try{if(!FieldConfig.collectFlg.pay){return}if(!orderId){return}var _type="pay";if(!SSATracker.isCollect(_type)){return}var orderId="",money="",state="",payType="";if(FieldConfig.pay.orderIdChannelId){if(FieldConfig.pay.orderIdChannelType==1){var orderIdElement=document.getElementById(FieldConfig.pay.orderIdChannelId);if(orderIdElement){orderId=orderIdElement.value}}else{if(FieldConfig.pay.orderIdChannelType==2){orderId=eval(FieldConfig.pay.orderIdChannelId)}else{if(FieldConfig.pay.orderIdChannelType==3){orderId=CookieUtils.getItem(FieldConfig.pay.orderIdChannelId)}}}if(!orderId){orderId=""}if(orderId&&FieldConfig.pay.orderIdChannelEncode){orderId=Utils.encode(orderId)}}if(FieldConfig.pay.orderAmountChannelId){if(FieldConfig.pay.orderAmountChannelType==1){var moneyElement=document.getElementById(FieldConfig.pay.orderAmountChannelId);if(moneyElement){money=moneyElement.value}}else{if(FieldConfig.pay.orderAmountChannelType==2){money=eval(FieldConfig.pay.orderAmountChannelId)}else{if(FieldConfig.pay.orderAmountChannelType==3){money=CookieUtils.getItem(FieldConfig.pay.orderAmountChannelId)}}}if(!money){money=""}if(money&&FieldConfig.pay.orderAmountChannelEncode){money=Utils.encode(money)}}if(FieldConfig.pay.payStateChannelId){if(FieldConfig.pay.payStateChannelType==1){var stateElement=document.getElementById(FieldConfig.pay.payStateChannelId);if(stateElement){state=stateElement.value}}else{if(FieldConfig.pay.payStateChannelType==2){state=eval(FieldConfig.pay.payStateChannelId)}else{if(FieldConfig.pay.payStateChannelType==3){state=CookieUtils.getItem(FieldConfig.pay.payStateChannelId)}}}if(!state){state=""}if(state&&FieldConfig.pay.payStateChannelEncode){state=Utils.encode(state)}}if(FieldConfig.pay.payWayChannelId){if(FieldConfig.pay.payWayChannelType==1){var payTypeElement=document.getElementById(FieldConfig.pay.payWayChannelId);if(payTypeElement){payType=payTypeElement.value}}else{if(FieldConfig.pay.payWayChannelType==2){payType=eval(FieldConfig.pay.payWayChannelId)}else{if(FieldConfig.pay.payWayChannelType==3){payType=CookieUtils.getItem(FieldConfig.pay.payWayChannelId)}}}if(!payType){payType=""}if(payType&&FieldConfig.pay.payWayChannelEncode){payType=Utils.encode(payType)}}var params="oid="+orderId+"&pm="+Utils.encode(money)+"&ps="+state+"&pt="+Utils.encode(payType);SSATracker.send(FieldConfig.dataType.pay,_type,params)}catch(e){}},custom:function(eventId,eventInfo){try{if(!FieldConfig.collectFlg.custom){return}if(!eventId||!eventInfo){return}var _type="custom";var params="eid="+eventId+"&evi="+Utils.encode(eventInfo);SSATracker.send(FieldConfig.dataType.custom,_type,params)}catch(e){}}};Config.init();PageUtils.setFromPageUrlCookie();var _currentPageUrl=PageUtils.getCurrentPageUrl();var _fromPageUrl=PageUtils.getFromPageUrl();SSATracker.startTracker();_ssa.dataType=FieldConfig.dataType;_ssa.sendData=SSATracker.multiData})(window,document);